add_header  X-Content-Type-Options nosniff;

server {
       listen 443 ssl;
       ssl_certificate     /data/ssl.crt;
       ssl_certificate_key /data/ssl.key;
       server_name         nginx-sxg.test;
       error_log           /var/log/nginx/error.log debug;
       rewrite_log         on;

       location /a {
              sxg on;
              sxg_certificate     /data/sxg1.crt;
              sxg_certificate_key /data/sxg1.key;
              sxg_cert_url        https://nginx-sxg.test/a/certs/cert.cbor;
              sxg_validity_url    https://nginx-sxg.test/a/validity/resource.msg;
       }
       location /b {
              sxg off;  # OFF!!
              sxg_certificate     /data/sxg2.crt;
              sxg_certificate_key /data/sxg2.key;
              sxg_cert_url        https://nginx-sxg.test/b/certs/cert.cbor;
              sxg_validity_url    https://nginx-sxg.test/b/validity/resource.msg;
       }
       location /c {
              sxg on;
              sxg_certificate     /data/sxg3.crt;
              sxg_certificate_key /data/sxg3.key;
              sxg_cert_url        https://nginx-sxg.test/c/certs/cert.cbor;
              sxg_validity_url    https://nginx-sxg.test/c/validity/resource.msg;
       }

       # nginx-sxg-module cannot resolve OCSP stapling because this is self-signed certificate.
       # So, do not enable this line.
       # sxg_cert_path       /cert.cbor;  

       root /var/www/nginx-sxg.test;
       index index.html;
}
